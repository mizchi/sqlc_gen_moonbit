// Validator generation for Params structs using codegen.mbt

///|
pub fn generate_validators(request : @plugin.GenerateRequest) -> String {
  let buf = StringBuilder::new()
  buf.write_string("// Generated by sqlc-gen-moonbit\n")
  buf.write_string("// Validation functions for Params structs\n\n")
  let emitter = @emit.ValidatorEmitter::new()

  // Generate validators for each Params struct
  for query in request.queries {
    if query.params.length() > 0 {
      // Convert to IR struct
      let ir_struct = query_params_to_ir_struct(query)
      // Emit validator using codegen.mbt
      let validator_code = emitter.emit_struct_validator(ir_struct)
      buf.write_string(validator_code)
      buf.write_string("\n")
    }
  }
  buf.to_string()
}
